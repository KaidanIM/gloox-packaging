Description: Drop superfluous (with GnuTLS >= 2.12) gcrypt usage.
Author: Andreas Metzler <ametzler@debian.org>
Bug-Debian: https://bugs.debian.org/745942
Origin: vendor
Bug: http://bugs.camaya.net/ticket/?id=231
Forwarded: http://bugs.camaya.net/ticket/attachments.php?id=231
Last-Update: 2014-09-13

--- gloox-1.0.10.orig/src/tlsgnutlsclient.cpp
+++ gloox-1.0.10/src/tlsgnutlsclient.cpp
@@ -18,12 +18,6 @@
 
 #include <errno.h>
 
-#ifdef HAVE_PTHREAD
-extern "C" {
-GCRY_THREAD_OPTION_PTHREAD_IMPL;
-}
-#endif
-
 namespace gloox
 {
 
@@ -48,8 +42,6 @@ namespace gloox
                            const std::string& /*clientCerts*/,
                            const StringList& /*cacerts*/ )
   {
-    gcry_control( GCRYCTL_SET_THREAD_CBS, &gcry_threads_pthread );
-
     const int protocolPriority[] = {
 #ifdef GNUTLS_TLS1_2
       GNUTLS_TLS1_2,
--- gloox-1.0.10.orig/src/tlsgnutlsclient.h
+++ gloox-1.0.10/src/tlsgnutlsclient.h
@@ -23,7 +23,6 @@
 
 #include <gnutls/gnutls.h>
 #include <gnutls/x509.h>
-#include <gcrypt.h>
 
 namespace gloox
 {
